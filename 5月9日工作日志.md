

# 5月9日工作日志

今天是我实习的第一天，今天主要是对mysql里面的增删改查进行一个学习。学会了INSTR(string str ,  string cmp) 和 substr(str, pos, len)的用法，excel 导入 mysql 以及同一张表进行查询并对同一张表进行更改update.

## MySQL

**INSTR函数**

#### instr函数介绍

instr(表字段，字符串），这个函数返回字符串在表字段中的位置，若是找不到则返回0，找到则返回字符串所在位置。（返回位置从1开始）

```sql
// 返回title中zq的第一次出现的位置
select instr(title,zq) from t_data
```

**substr函数**

按照指定条件，截取字符串

```sql
substr(obj，start，length)
```

**参数**

- obj：从哪个内容中截取，可以是数值或字符串。
- start：从哪个字符开始截取（1开始，而不是0开始）
- length：截取几个字符。

## 同表查询并更新

报错信息为：

```sql
You can't specify target table 'tb_test' for update in FROM clause,
```

**不能在同一语句中update，select同一张表。**不能在同一张表操作，换个思路，如果不是同一张表的话应该就是可以的。于是，**可以把select出来的结果当成一个临时的中间表**，从中间表中获取想要的更新相关的数据。

```sql
update tb_test 
set zq = '小榄镇' 
where title in (
	select title from (
		// 查询出来的结果作为一个临时表
		select * from tb_test where title like '%小榄%' as t
	)
) 
```

